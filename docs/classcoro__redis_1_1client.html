<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>coro_redis: coro_redis::client Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">coro_redis
   &#160;<span id="projectnumber">1.0.0.0</span>
   </div>
   <div id="projectbrief">C++ Corotine Redis Client</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>coro_redis</b></li><li class="navelem"><a class="el" href="classcoro__redis_1_1client.html">client</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classcoro__redis_1_1client-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">coro_redis::client Class Reference<span class="mlabels"><span class="mlabel">final</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>Redis Client.  
 <a href="classcoro__redis_1_1client.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="client_8hpp_source.html">client.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a56bb7038478608cadb73944ccc5246dd"><td class="memItemLeft" align="right" valign="top"><a id="a56bb7038478608cadb73944ccc5246dd"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>conn_awaiter_t</b> = task_awaiter&lt; std::shared_ptr&lt; <a class="el" href="classcoro__redis_1_1coro__connection.html">coro_connection</a> &gt;, const redisAsyncContext * &gt;</td></tr>
<tr class="separator:a56bb7038478608cadb73944ccc5246dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbf984705eea83e3fdc4a82fcb469878"><td class="memItemLeft" align="right" valign="top"><a id="afbf984705eea83e3fdc4a82fcb469878"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>fetch_awaiter_t</b> = task_awaiter&lt; std::shared_ptr&lt; <a class="el" href="classcoro__redis_1_1coro__connection.html">coro_connection</a> &gt; &gt;</td></tr>
<tr class="separator:afbf984705eea83e3fdc4a82fcb469878"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9339e87aef0c1e34ebf00b90da715d50"><td class="memItemLeft" align="right" valign="top">conn_awaiter_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoro__redis_1_1client.html#a9339e87aef0c1e34ebf00b90da715d50">coro_connect</a> (const <a class="el" href="structcoro__redis_1_1io__context.html">io_context</a> &amp;ioc, std::string_view host, uint16_t port, long timeout_seconds=5)</td></tr>
<tr class="memdesc:a9339e87aef0c1e34ebf00b90da715d50"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connect to redis server with corotine Example:  <a href="classcoro__redis_1_1client.html#a9339e87aef0c1e34ebf00b90da715d50">More...</a><br /></td></tr>
<tr class="separator:a9339e87aef0c1e34ebf00b90da715d50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75b2d00ababcb5cd37f7c68678162219"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classcoro__redis_1_1sync__connection.html">sync_connection</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoro__redis_1_1client.html#a75b2d00ababcb5cd37f7c68678162219">sync_connect</a> (std::string_view host_sv, uint16_t port, long timeout_seconds=5)</td></tr>
<tr class="memdesc:a75b2d00ababcb5cd37f7c68678162219"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connect to redis server synchronously.  <a href="classcoro__redis_1_1client.html#a75b2d00ababcb5cd37f7c68678162219">More...</a><br /></td></tr>
<tr class="separator:a75b2d00ababcb5cd37f7c68678162219"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20b3f8e0e4fd696b60ba5e5671db1304"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoro__redis_1_1client.html#a20b3f8e0e4fd696b60ba5e5671db1304">pool_init</a> (std::vector&lt; <a class="el" href="structcoro__redis_1_1io__context.html">io_context</a> * &gt; pool_ios, std::string_view host_sv, uint16_t port, long timeout_seconds=5)</td></tr>
<tr class="memdesc:a20b3f8e0e4fd696b60ba5e5671db1304"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializate redis connect pool.  <a href="classcoro__redis_1_1client.html#a20b3f8e0e4fd696b60ba5e5671db1304">More...</a><br /></td></tr>
<tr class="separator:a20b3f8e0e4fd696b60ba5e5671db1304"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d2340b310cdb79a71567dbc376d41c3"><td class="memItemLeft" align="right" valign="top">fetch_awaiter_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoro__redis_1_1client.html#a9d2340b310cdb79a71567dbc376d41c3">fetch_coro_conn</a> ()</td></tr>
<tr class="memdesc:a9d2340b310cdb79a71567dbc376d41c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetch a connection from pool for corotine function.  <a href="classcoro__redis_1_1client.html#a9d2340b310cdb79a71567dbc376d41c3">More...</a><br /></td></tr>
<tr class="separator:a9d2340b310cdb79a71567dbc376d41c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5702e0508e731a8ec646558f4f8d52f5"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classcoro__redis_1_1coro__connection.html">coro_connection</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoro__redis_1_1client.html#a5702e0508e731a8ec646558f4f8d52f5">sync_fetch_conn</a> ()</td></tr>
<tr class="memdesc:a5702e0508e731a8ec646558f4f8d52f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetch a connection from pool for corotine function.  <a href="classcoro__redis_1_1client.html#a5702e0508e731a8ec646558f4f8d52f5">More...</a><br /></td></tr>
<tr class="separator:a5702e0508e731a8ec646558f4f8d52f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:acf4c539f472e2706a46c00c1a6377723"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classcoro__redis_1_1client.html">client</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcoro__redis_1_1client.html#acf4c539f472e2706a46c00c1a6377723">get</a> ()</td></tr>
<tr class="memdesc:acf4c539f472e2706a46c00c1a6377723"><td class="mdescLeft">&#160;</td><td class="mdescRight">singleton for get client  <a href="classcoro__redis_1_1client.html#acf4c539f472e2706a46c00c1a6377723">More...</a><br /></td></tr>
<tr class="separator:acf4c539f472e2706a46c00c1a6377723"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Redis Client. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a9339e87aef0c1e34ebf00b90da715d50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9339e87aef0c1e34ebf00b90da715d50">&#9670;&nbsp;</a></span>coro_connect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">conn_awaiter_t coro_redis::client::coro_connect </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcoro__redis_1_1io__context.html">io_context</a> &amp;&#160;</td>
          <td class="paramname"><em>ioc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string_view&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>timeout_seconds</em> = <code>5</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Connect to redis server with corotine Example: </p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> conn_ret = co_await <a class="code" href="classcoro__redis_1_1client.html#acf4c539f472e2706a46c00c1a6377723">client::get</a>().<a class="code" href="classcoro__redis_1_1client.html#a9339e87aef0c1e34ebf00b90da715d50">coro_connect</a>(ioc, host, port, 50);</div>
<div class="line">std::shared_ptr&lt;coro_connection&gt; conn = conn_ret.value(); </div>
</div><!-- fragment --> <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ioc</td><td>Wrap for hiredis io context, I.E. libevent, libuv </td></tr>
    <tr><td class="paramname">host</td><td>Redis host name or IP </td></tr>
    <tr><td class="paramname">port</td><td>Reis listening port </td></tr>
    <tr><td class="paramname">timeout</td><td>Connecte and command timeout </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Corotine expression about connetion </dd></dl>

</div>
</div>
<a id="a9d2340b310cdb79a71567dbc376d41c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d2340b310cdb79a71567dbc376d41c3">&#9670;&nbsp;</a></span>fetch_coro_conn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">fetch_awaiter_t coro_redis::client::fetch_coro_conn </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fetch a connection from pool for corotine function. </p>
<p>@desc This function will look up from unusing list, and then try create new connection if total connectin is not over max. If connection pool is full and all connection are using this function will suspend to wait untill a connection is recycaled. Example: </p><div class="fragment"><div class="line"><span class="keyword">auto</span> conn_ret = co_await <a class="code" href="classcoro__redis_1_1client.html#acf4c539f472e2706a46c00c1a6377723">client::get</a>().<a class="code" href="classcoro__redis_1_1client.html#a9d2340b310cdb79a71567dbc376d41c3">fetch_coro_conn</a>();</div>
<div class="line">std::shared_ptr&lt;coro_connection&gt; conn = conn_ret.value(); </div>
</div><!-- fragment --> 
</div>
</div>
<a id="acf4c539f472e2706a46c00c1a6377723"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf4c539f472e2706a46c00c1a6377723">&#9670;&nbsp;</a></span>get()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classcoro__redis_1_1client.html">client</a>&amp; coro_redis::client::get </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>singleton for get client </p>

</div>
</div>
<a id="a20b3f8e0e4fd696b60ba5e5671db1304"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20b3f8e0e4fd696b60ba5e5671db1304">&#9670;&nbsp;</a></span>pool_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void coro_redis::client::pool_init </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; <a class="el" href="structcoro__redis_1_1io__context.html">io_context</a> * &gt;&#160;</td>
          <td class="paramname"><em>pool_ios</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string_view&#160;</td>
          <td class="paramname"><em>host_sv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>timeout_seconds</em> = <code>5</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initializate redis connect pool. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pool_ios</td><td>IO contexts, pool_ios's size is the connection count in pool, the connection will be lazy initializated at use </td></tr>
    <tr><td class="paramname">host</td><td>Redis host name or IP </td></tr>
    <tr><td class="paramname">port</td><td>Reis listening port </td></tr>
    <tr><td class="paramname">timeout</td><td>Connecte and command timeout </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a75b2d00ababcb5cd37f7c68678162219"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75b2d00ababcb5cd37f7c68678162219">&#9670;&nbsp;</a></span>sync_connect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classcoro__redis_1_1sync__connection.html">sync_connection</a>&gt; coro_redis::client::sync_connect </td>
          <td>(</td>
          <td class="paramtype">std::string_view&#160;</td>
          <td class="paramname"><em>host_sv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>timeout_seconds</em> = <code>5</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Connect to redis server synchronously. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">host</td><td>Redis host name or IP </td></tr>
    <tr><td class="paramname">port</td><td>Reis listening port </td></tr>
    <tr><td class="paramname">timeout</td><td>Connecte and command timeout </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Redis synchronous connetion </dd></dl>

</div>
</div>
<a id="a5702e0508e731a8ec646558f4f8d52f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5702e0508e731a8ec646558f4f8d52f5">&#9670;&nbsp;</a></span>sync_fetch_conn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classcoro__redis_1_1coro__connection.html">coro_connection</a>&gt; coro_redis::client::sync_fetch_conn </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fetch a connection from pool for corotine function. </p>
<p>@desc This function will look up from unusing list, and then try create new connection if total connectin is not over max. If connection pool is full and all connection are using this function will return nullptr. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/coro_redis/<a class="el" href="client_8hpp_source.html">client.hpp</a></li>
</ul>
</div><!-- contents -->
<div class="ttc" id="aclasscoro__redis_1_1client_html_acf4c539f472e2706a46c00c1a6377723"><div class="ttname"><a href="classcoro__redis_1_1client.html#acf4c539f472e2706a46c00c1a6377723">coro_redis::client::get</a></div><div class="ttdeci">static client &amp; get()</div><div class="ttdoc">singleton for get client</div><div class="ttdef"><b>Definition:</b> client.hpp:29</div></div>
<div class="ttc" id="aclasscoro__redis_1_1client_html_a9339e87aef0c1e34ebf00b90da715d50"><div class="ttname"><a href="classcoro__redis_1_1client.html#a9339e87aef0c1e34ebf00b90da715d50">coro_redis::client::coro_connect</a></div><div class="ttdeci">conn_awaiter_t coro_connect(const io_context &amp;ioc, std::string_view host, uint16_t port, long timeout_seconds=5)</div><div class="ttdoc">Connect to redis server with corotine Example:</div><div class="ttdef"><b>Definition:</b> client.hpp:47</div></div>
<div class="ttc" id="aclasscoro__redis_1_1client_html_a9d2340b310cdb79a71567dbc376d41c3"><div class="ttname"><a href="classcoro__redis_1_1client.html#a9d2340b310cdb79a71567dbc376d41c3">coro_redis::client::fetch_coro_conn</a></div><div class="ttdeci">fetch_awaiter_t fetch_coro_conn()</div><div class="ttdoc">Fetch a connection from pool for corotine function.</div><div class="ttdef"><b>Definition:</b> client.hpp:97</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
